{"ast":null,"code":"import { tree } from \"..\";\n\nfunction set(item, arr) {\n  if (item.category_id) {\n    arr.push({\n      category_id: item.product_id,\n      disabled: 1\n    });\n    item.disabled = 1;\n  } else {\n    arr.push({\n      product_id: item.product_id,\n      active: 0\n    });\n    item.active = 0;\n  }\n}\n\nfunction setStatus(list = [], arr) {\n  for (let branch of list) {\n    set(branch, arr);\n\n    if (branch.category_id) {\n      setStatus(branch.products, arr);\n      setStatus(branch.children, arr);\n    }\n  }\n}\n\nexport function offBranch(item, list, arr = []) {\n  return list.map(branch => {\n    if (tree.isEqual(item, branch)) {\n      set(branch, arr);\n      setStatus(branch.products, arr);\n      setStatus(branch.children, arr);\n    } else if (branch.category_id) {\n      branch.products = offBranch(item, branch.products, arr);\n      branch.children = offBranch(item, branch.children, arr);\n    }\n\n    return branch;\n  });\n}","map":null,"metadata":{},"sourceType":"module"}