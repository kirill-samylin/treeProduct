{"ast":null,"code":"import _objectSpread from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import validator from\"validator\";import{Popup,ImageCropper}from\"..\";import styles from\"./PopupProduct.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Form,Button,InputGroup,FormControl}from\"react-bootstrap\";import{selectState,handleClose,selectData}from\"./PopupProduct.slice\";import{insert}from'../App/App.slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PopupProduct=function PopupProduct(){var state=useSelector(selectState);var data=useSelector(selectData);var dispatch=useDispatch();var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid,reset=_useForm.reset;var onSubmit=function onSubmit(values){delete values.image;var data=_objectSpread({},values);data.product_id=+new Date();data.active=+values.active;dispatch(insert(data));onClose();};var onClose=function onClose(){dispatch(handleClose());};useEffect(function(){reset(data);},[reset,data]);useEffect(function(){register(\"price\",{validate:function validate(value){return validator.isCurrency(value);}});},[register]);return/*#__PURE__*/_jsx(Popup,{opened:state,title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\",onClose:onClose,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430:\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({as:\"textarea\",rows:2},register(\"ingredients\")))]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041A\\u0443\\u0445\\u043D\\u044F:\"}),/*#__PURE__*/_jsxs(Form.Control,_objectSpread(_objectSpread({as:\"select\",multiple:true},register(\"kitchen\",{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0420\\u0443\\u0441\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u0418\\u0442\\u0430\\u043B\\u044C\\u044F\\u043D\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\u042F\\u043F\\u043E\\u043D\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\u041F\\u0430\\u043D\\u0430\\u0437\\u0438\\u0430\\u0442\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"})]})),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.kitchen&&\"Выберите кухню\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(FormControl,_objectSpread({placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"},register(\"price\",{required:true}))),/*#__PURE__*/_jsx(InputGroup.Append,{children:/*#__PURE__*/_jsx(InputGroup.Text,{id:\"basic-addon2\",children:\"\\u0440\\u0443\\u0431.\"})})]}),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.price&&\"Укажите стоимость\"})]}),/*#__PURE__*/_jsx(ImageCropper,{register:register}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0412\\u0435\\u0441\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0435\\u0441\"},register(\"weight\")))]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041A\\u0430\\u043B\\u043E\\u0440\\u0438\\u0439\\u043D\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u0430\\u043B\\u043E\\u0440\\u0438\\u0439\\u043D\\u043E\\u0441\\u0442\\u044C\"},register(\"calorie\")))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.active\",className:\"mr-4\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439\"},register(\"active\")))}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.favorites\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\"},register(\"favorites\")))})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:!isValid,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",onClick:onClose,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};","map":null,"metadata":{},"sourceType":"module"}