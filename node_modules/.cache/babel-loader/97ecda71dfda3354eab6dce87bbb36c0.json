{"ast":null,"code":"export function flattenOld(products, arr = []) {\n  for (let product of products) {\n    arr.push(product);\n\n    if (Array.isArray(product.products)) {\n      flatten(product.products, arr);\n    }\n  }\n\n  return arr;\n}\nexport function flatten(products, parent_id, arr = []) {\n  for (let product of products) {\n    if (product.product_id) {\n      Object.defineProperty(product, 'parent_id', {\n        writable: true,\n        value: 'Foo'\n      });\n\n      try {\n        product.parent_id = parent_id;\n      } catch (e) {\n        console.log('error start');\n        console.log(e);\n        console.log('error end');\n        console.log('parent_id start');\n        console.log(parent_id);\n        console.log('parent_id end');\n        console.log('product start');\n        console.log(product);\n        console.log('product end');\n      }\n    }\n\n    if (product.category_id) {\n      flatten(product.products, product.category_id, arr);\n      flatten(product.children, product.category_id, arr);\n    }\n\n    arr.push(product);\n  }\n\n  return arr;\n}","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/module/product/flatten.js"],"names":["flattenOld","products","arr","product","push","Array","isArray","flatten","parent_id","product_id","Object","defineProperty","writable","value","e","console","log","category_id","children"],"mappings":"AAAA,OAAO,SAASA,UAAT,CAAoBC,QAApB,EAA8BC,GAAG,GAAC,EAAlC,EAAsC;AACzC,OAAK,IAAIC,OAAT,IAAoBF,QAApB,EAA8B;AAC1BC,IAAAA,GAAG,CAACE,IAAJ,CAASD,OAAT;;AACA,QAAIE,KAAK,CAACC,OAAN,CAAcH,OAAO,CAACF,QAAtB,CAAJ,EAAqC;AACjCM,MAAAA,OAAO,CAACJ,OAAO,CAACF,QAAT,EAAmBC,GAAnB,CAAP;AACH;AACJ;;AACD,SAAOA,GAAP;AACH;AACD,OAAO,SAASK,OAAT,CAAiBN,QAAjB,EAA2BO,SAA3B,EAAsCN,GAAG,GAAC,EAA1C,EAA8C;AACjD,OAAK,IAAIC,OAAT,IAAoBF,QAApB,EAA8B;AAC1B,QAAIE,OAAO,CAACM,UAAZ,EAAwB;AACpBC,MAAAA,MAAM,CAACC,cAAP,CAAsBR,OAAtB,EAA+B,WAA/B,EAA4C;AACxCS,QAAAA,QAAQ,EAAE,IAD8B;AAExCC,QAAAA,KAAK,EAAE;AAFiC,OAA5C;;AAIA,UAAI;AACAV,QAAAA,OAAO,CAACK,SAAR,GAAoBA,SAApB;AACH,OAFD,CAEE,OAAMM,CAAN,EAAS;AACPC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYR,SAAZ;AACAO,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYb,OAAZ;AACAY,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH;AAEJ;;AACD,QAAIb,OAAO,CAACc,WAAZ,EAAyB;AACrBV,MAAAA,OAAO,CAACJ,OAAO,CAACF,QAAT,EAAmBE,OAAO,CAACc,WAA3B,EAAwCf,GAAxC,CAAP;AACAK,MAAAA,OAAO,CAACJ,OAAO,CAACe,QAAT,EAAmBf,OAAO,CAACc,WAA3B,EAAwCf,GAAxC,CAAP;AACH;;AACDA,IAAAA,GAAG,CAACE,IAAJ,CAASD,OAAT;AACH;;AACD,SAAOD,GAAP;AACH","sourcesContent":["export function flattenOld(products, arr=[]) {\n    for (let product of products) {\n        arr.push(product);\n        if (Array.isArray(product.products)) { \n            flatten(product.products, arr)\n        }\n    }\n    return arr;\n}\nexport function flatten(products, parent_id, arr=[]) {\n    for (let product of products) {\n        if (product.product_id) {\n            Object.defineProperty(product, 'parent_id', {\n                writable: true,\n                value: 'Foo'\n            });\n            try {\n                product.parent_id = parent_id;\n            } catch(e) {\n                console.log('error start')\n                console.log(e)\n                console.log('error end')\n                console.log('parent_id start')\n                console.log(parent_id)\n                console.log('parent_id end')\n                console.log('product start')\n                console.log(product)\n                console.log('product end')\n            }\n            \n        }\n        if (product.category_id) {\n            flatten(product.products, product.category_id, arr)\n            flatten(product.children, product.category_id, arr)\n        }\n        arr.push(product);\n    }\n    return arr;\n}"]},"metadata":{},"sourceType":"module"}