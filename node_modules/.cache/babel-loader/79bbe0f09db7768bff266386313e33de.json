{"ast":null,"code":"import _objectSpread from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import validator from'validator';import{Popup,ImageCropper}from\"..\";import styles from\"./PopupCategory.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Form,Button}from\"react-bootstrap\";import*as categorySlice from\"./PopupCategory.slice\";import*as cropperSlice from\"../ImageCropper/ImageCropper.slice\";import{insert}from'../App/App.slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PopupCategory=function PopupCategory(){var state=useSelector(categorySlice.selectState);var data=useSelector(categorySlice.selectData);var url=useSelector(cropperSlice.selectUrl);var dispatch=useDispatch();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var onSubmit=function onSubmit(values){console.log(url);values.category_id=+new Date();values.products=[];delete values.image;dispatch(insert(values));dispatch(categorySlice.handleClose());};var onClose=function onClose(){dispatch(categorySlice.handleClose());};useEffect(function(){reset(data);},[reset,data]);useEffect(function(){register('price',{validate:function validate(value){return validator.isCurrency(value);}});},[register]);return/*#__PURE__*/_jsx(Popup,{opened:state,title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\",onClose:onClose,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (\\u0420\\u0443\\u0441\\u0441\\u043A\\u043E\\u0435):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (English):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name_en\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (Spanish):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name_es\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.activeCategory\",className:\"mr-4\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F\"},register(\"active\")))}),/*#__PURE__*/_jsx(ImageCropper,{register:register}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",onClick:onClose,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/PopupCategory/PopupCategory.js"],"names":["React","useEffect","validator","Popup","ImageCropper","styles","useSelector","useDispatch","useForm","Form","Button","categorySlice","cropperSlice","insert","PopupCategory","state","selectState","data","selectData","url","selectUrl","dispatch","register","handleSubmit","errors","formState","reset","onSubmit","values","console","log","category_id","Date","products","image","handleClose","onClose","validate","value","isCurrency","required","name","buttons"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport validator from 'validator';\nimport { Popup, ImageCropper } from \"..\";\nimport styles from \"./PopupCategory.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { Form, Button } from \"react-bootstrap\";\nimport * as categorySlice from \"./PopupCategory.slice\";\nimport * as cropperSlice from \"../ImageCropper/ImageCropper.slice\";\n\nimport {\n  insert,\n} from '../App/App.slice';\n\nexport const PopupCategory = () => {\n  const state = useSelector(categorySlice.selectState);\n  const data = useSelector(categorySlice.selectData);\n  const url = useSelector(cropperSlice.selectUrl); \n  const dispatch = useDispatch();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm();\n\n  const onSubmit = (values) => {\n    console.log(url)\n    values.category_id = +new Date();\n    values.products = [];\n    delete values.image;\n    dispatch(insert(values));\n    dispatch(categorySlice.handleClose());\n  };\n\n  const onClose = () => {\n    dispatch(categorySlice.handleClose());\n  };\n\n  useEffect(() => {\n    reset(data);\n  }, [reset, data]);\n\n  useEffect(() => {\n    register('price', {\n      validate: (value) => validator.isCurrency(value),\n    });\n  }, [register]);\n  \n  return (\n    <Popup\n      opened={state}\n      title=\"Добавить категорию\"\n      onClose={onClose}\n    >\n      <Form onSubmit={handleSubmit(onSubmit)}>\n        <Form.Group>\n          <Form.Label>Название (Русское):</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите название\"\n            {...register(\"name\", { required: true })}\n          />\n          <Form.Text className={styles.errors}>\n            {errors.name && \"Введите название\"}\n          </Form.Text>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Название (English):</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите название\"\n            {...register(\"name_en\", { required: true })}\n          />\n          <Form.Text className={styles.errors}>\n            {errors.name && \"Введите название\"}\n          </Form.Text>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Название (Spanish):</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите название\"\n            {...register(\"name_es\", { required: true })}\n          />\n          <Form.Text className={styles.errors}>\n            {errors.name && \"Введите название\"}\n          </Form.Text>\n        </Form.Group>\n\n        <Form.Group controlId=\"exampleForm.activeCategory\" className=\"mr-4\">\n          <Form.Check\n              type=\"checkbox\"\n              label=\"Активная\"\n              {...register(\"active\")}\n          />\n        </Form.Group>\n        <ImageCropper register={register} />\n        <div className={styles.buttons}>\n            <Button variant=\"primary\" type=\"submit\">\n                Добавить\n            </Button>\n            <Button variant=\"secondary\" type=\"button\" onClick={onClose} >\n                Отмена\n            </Button>\n        </div>\n      </Form>\n    </Popup>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}