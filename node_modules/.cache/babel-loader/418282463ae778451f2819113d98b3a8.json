{"ast":null,"code":"import _toConsumableArray from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{getProducts}from\"../../services/api\";import{tree}from\"../../utils\";var initialState={products:[],loading:false};export var treeAsync=createAsyncThunk(\"tree/getProducts\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProducts(id);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var treeSlice=createSlice({name:\"tree\",initialState:initialState,reducers:{changeStatus:function changeStatus(state,action){var item=action.payload;if(item.hasOwnProperty(\"active\")&&item.active||item.hasOwnProperty(\"disabled\")&&!item.disabled){state.products=tree.offBranch(item,state.products);}else{state.products=tree.onBranch(item,state.products);}},changeExpand:function changeExpand(state,action){var item=action.payload;state.products=tree.set(item,state.products,'expanded',!item.expanded);},insert:function insert(state,action){var item=action.payload;if(item.parent_id===\"root\"&&!item.product_id){state.products=[item].concat(_toConsumableArray(state.products.concat()));}else{state.products=tree.insert(item,state.products.concat());}},remove:function remove(state,action){var item=action.payload;state.products=tree.remove(item,state.products);}},extraReducers:function extraReducers(builder){builder.addCase(treeAsync.pending,function(state){state.loading=true;}).addCase(treeAsync.fulfilled,function(state,action){state.products=action.payload;state.loading=false;});}});var _treeSlice$actions=treeSlice.actions,changeStatus=_treeSlice$actions.changeStatus,changeExpand=_treeSlice$actions.changeExpand,insert=_treeSlice$actions.insert,remove=_treeSlice$actions.remove;export{changeStatus,changeExpand,insert,remove};export var selectTree=function selectTree(state){var items=state.tree.products;var list=tree.flatten(items);list=tree.passiveMode(list);var products=tree.get(items,list);return{list:list,products:products};};export default treeSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}