{"ast":null,"code":"var _jsxFileName = \"/Users/kirillsamylin/Desktop/table/stop-list/src/components/Tree/Tree.js\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useEffect, memo } from \"react\";\nimport styles from \"./Tree.module.css\";\nimport { Category, Product } from \"../\";\nimport cn from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Tree = /*#__PURE__*/memo(_c = _s(({\n  id,\n  categories,\n  products,\n  className,\n  expanded\n}) => {\n  _s();\n\n  const treeElement = /*#__PURE__*/createRef(null);\n\n  const onEnd = evt => {\n    const oldIndex = evt.oldIndex;\n    const index = evt.newIndex;\n    const item = evt.item;\n    const parent = evt.to;\n    const oldParent = evt.from;\n    const id = item.dataset.id;\n    const name = item.dataset.name;\n    const categoryId = parent.dataset.id;\n    const oldCategoryId = oldParent.dataset.id;\n    if (oldIndex === index && parent === oldParent) return;\n    console.log({\n      \"id предмета\": id,\n      \"id категории куда суем\": categoryId,\n      \"id категории откуда удаляем\": oldCategoryId,\n      \"index - место куда вставляем\": index,\n      \"oldIndex - место откуда вырезаем\": oldIndex,\n      \"тип\": name\n    });\n  };\n\n  const onMove = evt => {\n    const parent = evt.to;\n    const item = evt.dragged;\n    const category_id = parent.dataset.id;\n    const name = item.dataset.name;\n    if (category_id === \"root\" && name === \"product\") return false;\n    return true;\n  };\n\n  useEffect(() => {\n    window.$(treeElement.current).sortable({\n      fallbackOnBody: false,\n      // selectedClass: styles.selected,\n      // multiDrag: true,\n      group: {\n        name: \"list\"\n      },\n      animation: 200,\n      ghostClass: \"ghost\",\n      handle: \".position\",\n      onEnd,\n      onMove\n    });\n  }, [treeElement]);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    ref: treeElement,\n    \"data-id\": id,\n    className: cn(styles.tree, className, \"list-group\", {\n      [styles.open]: expanded\n    }),\n    children: [Array.isArray(products) && products.map(product => /*#__PURE__*/_jsxDEV(Product, {\n      product: product\n    }, product.product_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 35\n    }, this)), Array.isArray(categories) && categories.map(category => /*#__PURE__*/_jsxDEV(Category, {\n      product: category\n    }, category.category_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 38\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"));\n_c2 = Tree;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Tree$memo\");\n$RefreshReg$(_c2, \"Tree\");","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/Tree/Tree.js"],"names":["React","createRef","useEffect","memo","styles","Category","Product","cn","Tree","id","categories","products","className","expanded","treeElement","onEnd","evt","oldIndex","index","newIndex","item","parent","to","oldParent","from","dataset","name","categoryId","oldCategoryId","console","log","onMove","dragged","category_id","window","$","current","sortable","fallbackOnBody","group","animation","ghostClass","handle","tree","open","Array","isArray","map","product","product_id","category"],"mappings":"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","sourcesContent":["import React, { createRef, useEffect, memo } from \"react\";\nimport styles from \"./Tree.module.css\";\nimport { Category, Product } from \"../\";\nimport cn from \"classnames\";\n\nexport const Tree = memo(({ id, categories, products, className, expanded }) => {\n  const treeElement = createRef(null);\n\n  const onEnd = (evt) => {\n    const oldIndex = evt.oldIndex;\n    const index = evt.newIndex;\n    const item = evt.item;\n    const parent = evt.to;\n    const oldParent = evt.from;\n    const id = item.dataset.id;\n    const name = item.dataset.name;\n    const categoryId = parent.dataset.id;\n    const oldCategoryId = oldParent.dataset.id;\n\n    if (oldIndex === index && parent === oldParent) return;\n\n    console.log({\n      \"id предмета\": id,\n      \"id категории куда суем\": categoryId,\n      \"id категории откуда удаляем\": oldCategoryId,\n      \"index - место куда вставляем\": index,\n      \"oldIndex - место откуда вырезаем\": oldIndex,\n      \"тип\": name,\n    });\n  };\n\n  const onMove = (evt) => {\n    const parent = evt.to;\n    const item = evt.dragged;\n    const category_id = parent.dataset.id;\n    const name = item.dataset.name;\n    if (category_id === \"root\" && name === \"product\") return false;\n    return true;\n  };\n\n  useEffect(() => {\n    window.$(treeElement.current).sortable({\n      fallbackOnBody: false,\n      // selectedClass: styles.selected,\n      // multiDrag: true,\n      group: {\n        name: \"list\",\n      },\n      animation: 200,\n      ghostClass: \"ghost\",\n      handle: \".position\",\n      onEnd,\n      onMove,\n    });\n  }, [treeElement]);\n\n  return (\n    <ul\n      ref={treeElement}\n      data-id={id}\n      className={cn(styles.tree, className, \"list-group\", {\n        [styles.open]: expanded,\n      })}\n    >\n      {Array.isArray(products) &&\n        products.map((product) => <Product key={product.product_id} product={product} />\n      )}\n      {Array.isArray(categories) &&\n        categories.map((category) => <Category key={category.category_id} product={category} />\n        )}\n    </ul>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}