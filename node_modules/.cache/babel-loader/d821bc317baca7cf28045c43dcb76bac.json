{"ast":null,"code":"import _slicedToArray from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import{saveImage,getImageUrl}from\"../../services/api\";var initialState={isOpen:false,image:\"\",url:\"\",loading:false,imageLoad:false,images:[]};export var saveImageAsync=createAsyncThunk(\"imageCropper/saveImage\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return saveImage(data);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var getImageUrlAsync=createAsyncThunk(\"imageCropper/getImageUrl\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all(_toConsumableArray(data.map(function(image){var formData=new FormData();formData.append(\"image\",image.blob);formData.append(\"productId\",undefined);return getImageUrl(formData,image.key);})));case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var imageCropperSlice=createSlice({name:\"imageCropper\",initialState:initialState,reducers:{handleClose:function handleClose(state){state.imageLoad=false;state.isOpen=false;state.image=\"\";},handleOpen:function handleOpen(state,action){state.imageLoad=true;state.image=action.payload;state.isOpen=true;},handleRemove:function handleRemove(state){state.url=\"\";},offImageLoad:function offImageLoad(state){state.imageLoad=false;}},extraReducers:function extraReducers(builder){builder.addCase(getImageUrlAsync.pending,function(state){state.url=\"\";state.imageLoad=true;state.loading=true;state.isOpen=false;}).addCase(getImageUrlAsync.fulfilled,function(state,action){var images=action.payload;if(images.length){var _Object$entries$=_slicedToArray(Object.entries(images[0])[0],2),name=_Object$entries$[0],url=_Object$entries$[1];state.url=url;}//state.url = action.payload;\nstate.loading=false;state.imageLoad=false;});}});var _imageCropperSlice$ac=imageCropperSlice.actions,handleClose=_imageCropperSlice$ac.handleClose,handleOpen=_imageCropperSlice$ac.handleOpen,handleRemove=_imageCropperSlice$ac.handleRemove,offImageLoad=_imageCropperSlice$ac.offImageLoad;export{handleClose,handleOpen,handleRemove,offImageLoad};export var selectState=function selectState(state){return state.imageCropper.isOpen;};export var selectImage=function selectImage(state){return state.imageCropper.image;};export var selectUrl=function selectUrl(state){return state.imageCropper.url;};export var selectLoading=function selectLoading(state){return state.imageCropper.loading;};export var selectImageLoad=function selectImageLoad(state){return state.imageCropper.imageLoad;};export default imageCropperSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}