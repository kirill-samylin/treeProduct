{"ast":null,"code":"import _objectSpread from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"register\",\"options\"];import React,{useCallback}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import\"cropperjs/dist/cropper.css\";import{Form}from\"react-bootstrap\";import{handleOpen,selectImageLoad}from\"./ImageCropper.slice\";import ImageCropperPreview from'./ImageCropperPreview/ImageCropperPreview';import ImageCropperPopup from'./ImageCropperPopup/ImageCropperPopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ImageCropper=function ImageCropper(_ref){var register=_ref.register,options=_ref.options,props=_objectWithoutProperties(_ref,_excluded);console.log('render ImageCropper');var dispatch=useDispatch();var imageLoad=useSelector(selectImageLoad);var handleCropper=useCallback(function(file){var isImage=/^image\\/\\w+$/.test(file.type);if(!isImage)return;var reader=new FileReader();reader.onload=function(){dispatch(handleOpen(reader.result));};reader.readAsDataURL(file);},[dispatch]);var onClick=useCallback(function(e){if(e&&e.target&&e.target.value){e.target.value=null;}},[]);var onChange=useCallback(function(e){e.preventDefault();var files;if(e.dataTransfer){files=e.dataTransfer.files;}else if(e.target){files=e.target.files;}if(files.length){handleCropper(files[0]);}},[handleCropper]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ImageCropperPreview,_objectSpread({},props)),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.File,_objectSpread(_objectSpread({label:\"\\u041A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0430\"},register(\"image\")),{},{onChange:onChange,onClick:onClick,disabled:imageLoad}))}),/*#__PURE__*/_jsx(ImageCropperPopup,_objectSpread({},options))]});};","map":null,"metadata":{},"sourceType":"module"}