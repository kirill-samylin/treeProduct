{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import*as api from\"../../services/api\";import{tree}from\"../../utils\";import{localeProducts}from\"../../services/localeProducts\";var initialState={products:[],loading:false};export var getAsync=createAsyncThunk(\"tree/get\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(restaurant_id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(restaurant_id===\"test\")){_context.next=2;break;}return _context.abrupt(\"return\",localeProducts);case 2:_context.next=4;return api.get(restaurant_id);case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var removeAsync=createAsyncThunk(\"tree/remove\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(product){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(product.id===\"test\")){_context2.next=2;break;}return _context2.abrupt(\"return\",product);case 2:_context2.next=4;return api.remove(product);case 4:return _context2.abrupt(\"return\",_context2.sent);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var treeSlice=createSlice({name:\"tree\",initialState:initialState,reducers:{changeStatus:function changeStatus(state,action){var item=action.payload;if(item.hasOwnProperty(\"active\")&&item.active||item.hasOwnProperty(\"disabled\")&&!item.disabled){state.products=tree.offBranch(item,state.products);}else{state.products=tree.onBranch(item,state.products);}},changeExpand:function changeExpand(state,action){var item=action.payload;state.products=tree.set(item,state.products,'expanded',!item.expanded);},insert:function insert(state,action){var item=action.payload;state.products=tree.insert(item,state.products);},remove:function remove(state,action){var item=action.payload;state.products=tree.remove(item,state.products);},move:function move(state,action){var item=action.payload;tree.move(item,state.products);}},extraReducers:function extraReducers(builder){builder.addCase(getAsync.pending,function(state){state.loading=true;}).addCase(getAsync.fulfilled,function(state,action){state.products=action.payload;state.loading=false;}).addCase(getAsync.rejected,function(state){state.products=localeProducts;state.loading=false;}).addCase(removeAsync.pending,function(state){state.loading=true;}).addCase(removeAsync.fulfilled,function(state,action){var item=action.payload;state.products=tree.remove(item,state.products);state.loading=false;});}});var _treeSlice$actions=treeSlice.actions,changeStatus=_treeSlice$actions.changeStatus,changeExpand=_treeSlice$actions.changeExpand,insert=_treeSlice$actions.insert,remove=_treeSlice$actions.remove;export{changeStatus,changeExpand,insert,remove};export var selectTree=function selectTree(state){var items=state.tree.products;var list=tree.flatten(items);list=tree.passiveMode(list);var products=tree.get(items,list);return{list:list,products:products};};export default treeSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}