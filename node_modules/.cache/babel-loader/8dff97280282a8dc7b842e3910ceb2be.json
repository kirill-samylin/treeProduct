{"ast":null,"code":"import _toConsumableArray from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{getProducts}from\"../../services/api\";import{tree}from\"../../utils\";var initialState={products:[],loading:false};export var treeAsync=createAsyncThunk(\"tree/getProducts\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProducts(id);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var treeSlice=createSlice({name:\"tree\",initialState:initialState,reducers:{changeStatus:function changeStatus(state,action){var item=action.payload;if(item.hasOwnProperty(\"active\")&&item.active||item.hasOwnProperty(\"disabled\")&&!item.disabled){state.products=tree.offBranch(item,state.products);}else{state.products=tree.onBranch(item,state.products);}},changeExpand:function changeExpand(state,action){var item=action.payload;state.products=tree.set(item,state.products,'expanded',!item.expanded);},insert:function insert(state,action){var item=action.payload;if(item.parent_id===\"root\"&&!item.product_id){state.products=[item].concat(_toConsumableArray(state.products.concat()));}else{state.products=tree.insert(item,state.products.concat());}},remove:function remove(state,action){var item=action.payload;state.products=tree.remove(item,state.products);}},extraReducers:function extraReducers(builder){builder.addCase(treeAsync.pending,function(state){state.loading=true;}).addCase(treeAsync.fulfilled,function(state,action){state.products=action.payload;state.loading=false;});}});var _treeSlice$actions=treeSlice.actions,changeStatus=_treeSlice$actions.changeStatus,changeExpand=_treeSlice$actions.changeExpand,insert=_treeSlice$actions.insert,remove=_treeSlice$actions.remove;export{changeStatus,changeExpand,insert,remove};export var selectTree=function selectTree(state){var items=state.tree.products;var list=tree.flatten(items);list=tree.passiveMode(list);var products=tree.get(items,list);return{list:list,products:products};};export default treeSlice.reducer;","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/App/App.slice.js"],"names":["createAsyncThunk","createSlice","getProducts","tree","initialState","products","loading","treeAsync","id","response","data","treeSlice","name","reducers","changeStatus","state","action","item","payload","hasOwnProperty","active","disabled","offBranch","onBranch","changeExpand","set","expanded","insert","parent_id","product_id","concat","remove","extraReducers","builder","addCase","pending","fulfilled","actions","selectTree","items","list","flatten","passiveMode","get","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getProducts } from \"../../services/api\";\nimport { tree } from \"../../utils\";\n\nconst initialState = {\n  products: [],\n  loading: false,\n};\n\nexport const treeAsync = createAsyncThunk(\n  \"tree/getProducts\",\n  async (id) => {\n    const response = await getProducts(id);\n    return response.data;\n  }\n);\n\nexport const treeSlice = createSlice({\n  name: \"tree\",\n  initialState,\n  reducers: {\n    changeStatus: (state, action) => {\n      const item = action.payload;\n      if ((item.hasOwnProperty(\"active\") && item.active) || (item.hasOwnProperty(\"disabled\") && !item.disabled)) {\n        state.products = tree.offBranch(item, state.products);\n      } else {\n        state.products = tree.onBranch(item, state.products);\n      }\n    },\n    changeExpand: (state, action) => {\n      const item = action.payload;\n      state.products = tree.set(item, state.products, 'expanded', !item.expanded);\n    },\n    insert: (state, action) => {\n      const item = action.payload;\n      if (item.parent_id === \"root\" && !item.product_id) {\n        state.products = [item, ...state.products.concat()];\n      } else {\n        state.products = tree.insert(item, state.products.concat());\n      }\n    },\n    remove: (state, action) => {\n      const item = action.payload;\n      state.products = tree.remove(item, state.products);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(treeAsync.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(treeAsync.fulfilled, (state, action) => {\n        state.products = action.payload;\n        state.loading = false;\n      });\n  },\n});\n\nexport const { changeStatus, changeExpand, insert, remove } = treeSlice.actions;\n\nexport const selectTree = (state) => {\n  const items = state.tree.products;\n  let list = tree.flatten(items);\n  list = tree.passiveMode(list);\n  const products = tree.get(items, list);\n  return { list, products };\n};\n\nexport default treeSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}