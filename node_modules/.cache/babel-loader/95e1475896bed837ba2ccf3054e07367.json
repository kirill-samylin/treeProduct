{"ast":null,"code":"import _objectSpread from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import validator from\"validator\";import{Popup,ImageCropper}from\"..\";import styles from\"./PopupProduct.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Form,Button,InputGroup,FormControl}from\"react-bootstrap\";import{selectState,handleClose,selectData}from\"./PopupProduct.slice\";import{insert}from'../App/App.slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PopupProduct=function PopupProduct(){var state=useSelector(selectState);var data=useSelector(selectData);var dispatch=useDispatch();var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid,reset=_useForm.reset;var onSubmit=function onSubmit(values){delete values.image;dispatch(insert(_objectSpread({product_id:+new Date()},values)));onClose();};var onClose=function onClose(){dispatch(handleClose());};useEffect(function(){reset(data);},[reset,data]);useEffect(function(){register(\"price\",{validate:function validate(value){return validator.isCurrency(value);}});},[register]);return/*#__PURE__*/_jsx(Popup,{opened:state,title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\",onClose:onClose,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430:\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({as:\"textarea\",rows:2},register(\"ingredients\")))]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041A\\u0443\\u0445\\u043D\\u044F:\"}),/*#__PURE__*/_jsxs(Form.Control,_objectSpread(_objectSpread({as:\"select\",multiple:true},register(\"kitchen\",{required:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0420\\u0443\\u0441\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u0418\\u0442\\u0430\\u043B\\u044C\\u044F\\u043D\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\u042F\\u043F\\u043E\\u043D\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\u041F\\u0430\\u043D\\u0430\\u0437\\u0438\\u0430\\u0442\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u0430\\u044F \\u043A\\u0443\\u0445\\u043D\\u044F\"})]})),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.kitchen&&\"Выберите кухню\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(FormControl,_objectSpread({placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"},register(\"price\",{required:true}))),/*#__PURE__*/_jsx(InputGroup.Append,{children:/*#__PURE__*/_jsx(InputGroup.Text,{id:\"basic-addon2\",children:\"\\u0440\\u0443\\u0431.\"})})]}),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.price&&\"Укажите стоимость\"})]}),/*#__PURE__*/_jsx(ImageCropper,{register:register}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0412\\u0435\\u0441\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0435\\u0441\"},register(\"weight\")))]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041A\\u0430\\u043B\\u043E\\u0440\\u0438\\u0439\\u043D\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u0430\\u043B\\u043E\\u0440\\u0438\\u0439\\u043D\\u043E\\u0441\\u0442\\u044C\"},register(\"calorie\")))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.active\",className:\"mr-4\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439\"},register(\"active\")))}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.favorites\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0435\"},register(\"favorites\")))})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:!isValid,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",onClick:onClose,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/PopupProduct/PopupProduct.js"],"names":["React","useEffect","validator","Popup","ImageCropper","styles","useSelector","useDispatch","useForm","Form","Button","InputGroup","FormControl","selectState","handleClose","selectData","insert","PopupProduct","state","data","dispatch","mode","register","handleSubmit","formState","errors","isValid","reset","onSubmit","values","image","product_id","Date","onClose","validate","value","isCurrency","required","name","kitchen","price","buttons"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport validator from \"validator\";\nimport { Popup, ImageCropper } from \"..\";\nimport styles from \"./PopupProduct.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { Form, Button, InputGroup, FormControl } from \"react-bootstrap\";\nimport { selectState, handleClose, selectData } from \"./PopupProduct.slice\";\n\nimport {\n  insert,\n} from '../App/App.slice';\n\nexport const PopupProduct = () => {\n  const state = useSelector(selectState);\n  const data = useSelector(selectData);\n  const dispatch = useDispatch();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isValid },\n    reset,\n  } = useForm({ mode: 'onChange' });\n\n  const onSubmit = (values) => {\n    delete values.image;\n    dispatch(insert({\n      product_id: +new Date(),\n      ...values\n    }));\n    onClose();\n  };\n\n  const onClose = () => {\n    dispatch(handleClose());\n  };\n\n  useEffect(() => {\n    reset(data);\n  }, [reset, data]);\n\n  useEffect(() => {\n    register(\"price\", {\n      validate: (value) => validator.isCurrency(value),\n    });\n  }, [register]);\n\n  return (\n    <Popup opened={state} title=\"Добавить продукт\" onClose={onClose}>\n      <Form onSubmit={handleSubmit(onSubmit)}>\n        <Form.Group>\n          <Form.Label>Название продукта:</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите название\"\n            {...register(\"name\", { required: true })}\n          />\n          <Form.Text className={styles.errors}>\n            {errors.name && \"Введите название\"}\n          </Form.Text>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Описание:</Form.Label>\n          <Form.Control as=\"textarea\" rows={2} {...register(\"ingredients\")} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Кухня:</Form.Label>\n          <Form.Control\n            as=\"select\"\n            multiple\n            {...register(\"kitchen\", { required: true })}\n          >\n            <option value=\"0\">Русская кухня</option>\n            <option value=\"1\">Итальянская кухня</option>\n            <option value=\"2\">Японская кухня</option>\n            <option value=\"3\">Паназиатская кухня</option>\n            <option value=\"4\">Авторская кухня</option>\n          </Form.Control>\n          <Form.Text className={styles.errors}>\n            {errors.kitchen && \"Выберите кухню\"}\n          </Form.Text>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Цена:</Form.Label>\n          <InputGroup className=\"mb-3\">\n            <FormControl\n              placeholder=\"Введите стоимость\"\n              aria-label=\"Recipient's username\"\n              aria-describedby=\"basic-addon2\"\n              {...register(\"price\", { required: true })}\n            />\n            <InputGroup.Append>\n              <InputGroup.Text id=\"basic-addon2\">руб.</InputGroup.Text>\n            </InputGroup.Append>\n          </InputGroup>\n          <Form.Text className={styles.errors}>\n            {errors.price && \"Укажите стоимость\"}\n          </Form.Text>\n        </Form.Group>\n        <ImageCropper register={register}/>\n        <Form.Group>\n          <Form.Label>Вес</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите вес\"\n            {...register(\"weight\")}\n          />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Калорийность</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Введите калорийность\"\n            {...register(\"calorie\")}\n          />\n        </Form.Group>\n        <div className=\"d-flex\">\n          <Form.Group controlId=\"exampleForm.active\" className=\"mr-4\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"Активный\"\n              {...register(\"active\")}\n            />\n          </Form.Group>\n          <Form.Group controlId=\"exampleForm.favorites\">\n            <Form.Check\n              type=\"checkbox\"\n              label=\"Избранное\"\n              {...register(\"favorites\")}\n            />\n          </Form.Group>\n        </div>\n        <div className={styles.buttons}>\n          <Button variant=\"primary\" type=\"submit\" disabled={!isValid}>\n            Добавить\n          </Button>\n          <Button variant=\"secondary\" type=\"button\" onClick={onClose}>\n            Отмена\n          </Button>\n        </div>\n      </Form>\n    </Popup>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}