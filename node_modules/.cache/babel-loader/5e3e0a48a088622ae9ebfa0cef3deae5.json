{"ast":null,"code":"import _toConsumableArray from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{getProducts}from\"../../services/api\";import{tree}from\"../../utils\";var initialState={products:[],list:[],loading:false};export var treeAsync=createAsyncThunk(\"tree/getProducts\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProducts(id);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var treeSlice=createSlice({name:\"tree\",initialState:initialState,reducers:{changeStatus:function changeStatus(state,action){var item=action.payload;var items=[];if(item.hasOwnProperty(\"active\")&&item.active||item.hasOwnProperty(\"disabled\")&&!item.disabled){items=tree.offBranch(item,state.products);}else{items=tree.onBranch(item,state.products);}var list=tree.flatten(items);list=tree.passiveMode(list);state.products=tree.get(items,list);},changeExpand:function changeExpand(state,action){var item=action.payload;state.products=tree.set(item,state.products,'expanded',!item.expanded);},insert:function insert(state,action){var item=action.payload;if(item.parent_id===\"root\"&&!item.product_id){state.products=[item].concat(_toConsumableArray(state.products.concat()));}else{state.products=tree.insert(item,state.products.concat());}},remove:function remove(state,action){var item=action.payload;state.products=tree.remove(item,state.products);}},extraReducers:function extraReducers(builder){builder.addCase(treeAsync.pending,function(state){state.loading=true;}).addCase(treeAsync.fulfilled,function(state,action){var list=tree.flatten(action.payload);list=tree.passiveMode(list);var products=tree.get(action.payload,list);state.products=products;state.list=list;state.loading=false;});}});var _treeSlice$actions=treeSlice.actions,changeStatus=_treeSlice$actions.changeStatus,changeExpand=_treeSlice$actions.changeExpand,insert=_treeSlice$actions.insert,remove=_treeSlice$actions.remove;export{changeStatus,changeExpand,insert,remove};export var selectProducts=function selectProducts(state){return state.tree.products;};export default treeSlice.reducer;","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/App/App.slice.js"],"names":["createAsyncThunk","createSlice","getProducts","tree","initialState","products","list","loading","treeAsync","id","response","data","treeSlice","name","reducers","changeStatus","state","action","item","payload","items","hasOwnProperty","active","disabled","offBranch","onBranch","flatten","passiveMode","get","changeExpand","set","expanded","insert","parent_id","product_id","concat","remove","extraReducers","builder","addCase","pending","fulfilled","actions","selectProducts","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getProducts } from \"../../services/api\";\nimport { tree } from \"../../utils\";\n\nconst initialState = {\n  products: [],\n  list: [],\n  loading: false,\n};\n\nexport const treeAsync = createAsyncThunk(\n  \"tree/getProducts\",\n  async (id) => {\n    const response = await getProducts(id);\n    return response.data;\n  }\n);\n\nexport const treeSlice = createSlice({\n  name: \"tree\",\n  initialState,\n  reducers: {\n    changeStatus: (state, action) => {\n      const item = action.payload;\n      let items = [];\n      if ((item.hasOwnProperty(\"active\") && item.active) || (item.hasOwnProperty(\"disabled\") && !item.disabled)) {\n        items = tree.offBranch(item, state.products);\n      } else {\n        items = tree.onBranch(item, state.products);\n      }\n      let list = tree.flatten(items);\n      list = tree.passiveMode(list);\n      state.products = tree.get(items, list);\n    },\n    changeExpand: (state, action) => {\n      const item = action.payload;\n      state.products = tree.set(item, state.products, 'expanded', !item.expanded);\n    },\n    insert: (state, action) => {\n      const item = action.payload;\n      if (item.parent_id === \"root\" && !item.product_id) {\n        state.products = [item, ...state.products.concat()];\n      } else {\n        state.products = tree.insert(item, state.products.concat());\n      }\n    },\n    remove: (state, action) => {\n      const item = action.payload;\n      state.products = tree.remove(item, state.products);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(treeAsync.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(treeAsync.fulfilled, (state, action) => {\n        let list = tree.flatten(action.payload);\n        list = tree.passiveMode(list);\n        const products = tree.get(action.payload, list);\n        state.products = products;\n        state.list = list;\n        state.loading = false;\n      });\n  },\n});\n\nexport const { changeStatus, changeExpand, insert, remove } = treeSlice.actions;\n\nexport const selectProducts = (state) => state.tree.products;\n\nexport default treeSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}