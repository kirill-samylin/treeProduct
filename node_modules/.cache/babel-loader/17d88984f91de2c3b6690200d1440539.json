{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getProducts } from \"../../services/api\";\nimport { product, category, tree } from \"../../module\";\nconst initialState = {\n  products: [],\n  list: [],\n  loading: false\n};\nexport const treeAsync = createAsyncThunk(\"tree/getProducts\", async id => {\n  const response = await getProducts(id);\n  return response.data;\n});\nexport const treeSlice = createSlice({\n  name: \"tree\",\n  initialState,\n  reducers: {\n    changeStatus: (state, action) => {\n      const item = action.payload;\n\n      if (item.hasOwnProperty(\"active\") && item.active || item.hasOwnProperty(\"disabled\") && !item.disabled) {\n        tree.offBra;\n      }\n\n      const tree2 = category.changeDisabled(item, state.products, status);\n      const list = product.flatten(tree2);\n      state.products = product.tree(tree, list);\n    },\n    changeExpand: (state, action) => {\n      const item = action.payload;\n      state.products = product.set(item, state.products, 'expanded', !item.expanded);\n    },\n    insert: (state, action) => {\n      const item = action.payload;\n\n      if (item.parent_id === \"root\" && !item.product_id) {\n        state.products = [item, ...state.products.concat()];\n      } else {\n        state.products = product.insert(item, state.products.concat());\n      }\n    },\n    remove: (state, action) => {\n      const item = action.payload;\n      console.log(item);\n      state.products = product.remove(item, state.products);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(treeAsync.pending, state => {\n      state.loading = true;\n    }).addCase(treeAsync.fulfilled, (state, action) => {\n      console.log(action.payload);\n      let list = product.flatten(action.payload);\n      list = product.getPassive(list);\n      const products = product.tree(action.payload, list);\n      state.loading = false;\n      state.products = products;\n      state.list = list;\n    });\n  }\n});\nexport const {\n  changeStatus,\n  changeExpand,\n  insert,\n  remove\n} = treeSlice.actions;\nexport const selectProducts = state => state.tree.products;\nexport default treeSlice.reducer;","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/App/App.slice.js"],"names":["createAsyncThunk","createSlice","getProducts","product","category","tree","initialState","products","list","loading","treeAsync","id","response","data","treeSlice","name","reducers","changeStatus","state","action","item","payload","hasOwnProperty","active","disabled","offBra","tree2","changeDisabled","status","flatten","changeExpand","set","expanded","insert","parent_id","product_id","concat","remove","console","log","extraReducers","builder","addCase","pending","fulfilled","getPassive","actions","selectProducts","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getProducts } from \"../../services/api\";\nimport { product, category, tree } from \"../../module\";\n\nconst initialState = {\n  products: [],\n  list: [],\n  loading: false,\n};\n\nexport const treeAsync = createAsyncThunk(\n  \"tree/getProducts\",\n  async (id) => {\n    const response = await getProducts(id);\n    return response.data;\n  }\n);\n\nexport const treeSlice = createSlice({\n  name: \"tree\",\n  initialState,\n  reducers: {\n    changeStatus: (state, action) => {\n      const item = action.payload;\n      if (item.hasOwnProperty(\"active\") && item.active || item.hasOwnProperty(\"disabled\") && !item.disabled) {\n        tree.offBra\n      }\n      const tree2 = category.changeDisabled(item, state.products, status);\n      const list = product.flatten(tree2);\n      state.products = product.tree(tree, list);\n    },\n    changeExpand: (state, action) => {\n      const item = action.payload;\n      state.products = product.set(item, state.products, 'expanded', !item.expanded);\n    },\n    insert: (state, action) => {\n      const item = action.payload;\n      if (item.parent_id === \"root\" && !item.product_id) {\n        state.products = [item, ...state.products.concat()];\n      } else {\n        state.products = product.insert(item, state.products.concat());\n      }\n    },\n    remove: (state, action) => {\n      const item = action.payload;\n      console.log(item)\n      state.products = product.remove(item, state.products);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(treeAsync.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(treeAsync.fulfilled, (state, action) => {\n        console.log(action.payload);\n        let list = product.flatten(action.payload);\n        list = product.getPassive(list);\n        const products = product.tree(action.payload, list);\n        state.loading = false;\n        state.products = products;\n        state.list = list;\n      });\n  },\n});\n\nexport const { changeStatus, changeExpand, insert, remove } = treeSlice.actions;\n\nexport const selectProducts = (state) => state.tree.products;\n\nexport default treeSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}