{"ast":null,"code":"import _toConsumableArray from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kirillsamylin/Desktop/table/stop-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{getProducts}from\"../../services/api\";import{product}from\"../../module\";var initialState={products:[],list:[],loading:false};export var treeAsync=createAsyncThunk(\"tree/getProducts\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(amount){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProducts(amount);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var treeSlice=createSlice({name:\"tree\",initialState:initialState,reducers:{changeStatus:function changeStatus(state,action){var item=action.payload;state.products=product.setStatus(item,state.products,!item.active);},changeExpand:function changeExpand(state,action){var item=action.payload;state.products=product.set(item,state.products,'expanded',!item.expanded);},insert:function insert(state,action){var item=action.payload;if(item.parent_id===\"root\"&&!item.product_id){state.products=[item].concat(_toConsumableArray(state.products.concat()));}else{state.products=product.insert(item,state.products.concat());}},remove:function remove(state,action){var item=action.payload;console.log(item);state.products=product.remove(item,state.products);}},extraReducers:function extraReducers(builder){builder.addCase(treeAsync.pending,function(state){state.loading=true;}).addCase(treeAsync.fulfilled,function(state,action){var list=product.flatten(action.payload);var products=product.tree(action.payload,list);state.loading=false;state.products=products;state.list=list;});}});var _treeSlice$actions=treeSlice.actions,changeStatus=_treeSlice$actions.changeStatus,changeExpand=_treeSlice$actions.changeExpand,insert=_treeSlice$actions.insert,remove=_treeSlice$actions.remove;export{changeStatus,changeExpand,insert,remove};export var selectProducts=function selectProducts(state){return state.tree.products;};export default treeSlice.reducer;","map":{"version":3,"sources":["/Users/kirillsamylin/Desktop/table/stop-list/src/components/App/App.slice.js"],"names":["createAsyncThunk","createSlice","getProducts","product","initialState","products","list","loading","treeAsync","amount","response","data","treeSlice","name","reducers","changeStatus","state","action","item","payload","setStatus","active","changeExpand","set","expanded","insert","parent_id","product_id","concat","remove","console","log","extraReducers","builder","addCase","pending","fulfilled","flatten","tree","actions","selectProducts","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getProducts } from \"../../services/api\";\nimport { product } from \"../../module\";\n\nconst initialState = {\n  products: [],\n  list: [],\n  loading: false,\n};\n\nexport const treeAsync = createAsyncThunk(\n  \"tree/getProducts\",\n  async (amount) => {\n    const response = await getProducts(amount);\n    return response.data;\n  }\n);\n\nexport const treeSlice = createSlice({\n  name: \"tree\",\n  initialState,\n  reducers: {\n    changeStatus: (state, action) => {\n      const item = action.payload;\n      state.products = product.setStatus(\n        item,\n        state.products,\n        !item.active\n      );\n    },\n    changeExpand: (state, action) => {\n      const item = action.payload;\n      state.products = product.set(item, state.products, 'expanded', !item.expanded);\n    },\n    insert: (state, action) => {\n      const item = action.payload;\n      if (item.parent_id === \"root\" && !item.product_id) {\n        state.products = [item, ...state.products.concat()];\n      } else {\n        state.products = product.insert(item, state.products.concat());\n      }\n    },\n    remove: (state, action) => {\n      const item = action.payload;\n      console.log(item)\n      state.products = product.remove(item, state.products);\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(treeAsync.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(treeAsync.fulfilled, (state, action) => {\n        const list = product.flatten(action.payload);\n        const products = product.tree(action.payload, list);\n        state.loading = false;\n        state.products = products;\n        state.list = list;\n      });\n  },\n});\n\nexport const { changeStatus, changeExpand, insert, remove } = treeSlice.actions;\n\nexport const selectProducts = (state) => state.tree.products;\n\nexport default treeSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}