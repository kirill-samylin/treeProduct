{"ast":null,"code":"import _objectSpread from\"/Users/kirillsamylin/Desktop/job/foodle-api/src/lk/web/js/react/tree/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useCallback}from\"react\";import{Popup,ImageCropper}from\"..\";import styles from\"./PopupCategory.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Form,Button}from\"react-bootstrap\";import{selectState,selectData,handleClose}from\"./PopupCategory.slice\";import{handleRemove}from\"../ImageCropper/ImageCropper.slice\";import{insert}from'../Tree/Tree.slice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PopupCategory=function PopupCategory(){console.log('render PopupCategory');var state=useSelector(selectState);var data=useSelector(selectData);var dispatch=useDispatch();var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isValid=_useForm$formState.isValid,reset=_useForm.reset;var onClose=useCallback(function(){dispatch(handleClose());dispatch(handleRemove());},[dispatch]);var onSubmit=useCallback(function(values){values.category_id=+new Date();values.products=[];values.children=[];values.disabled=+values.disabled;delete values.image;dispatch(insert(values));onClose();},[dispatch,onClose]);useEffect(function(){reset(data);},[reset,data]);var options={cropperOptions:{aspectRatio:1/1,autoCropArea:1},formats:[{key:\"icon\",type:\"image/png\",width:120,height:120},{key:\"icon\",type:\"image/png\",width:120,height:120},{key:\"icon\",type:\"image/png\",width:120,height:120},{key:\"icon\",type:\"image/png\",width:120,height:120},{key:\"icon\",type:\"image/png\",width:120,height:120}]};return/*#__PURE__*/_jsx(Popup,{opened:state,title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\",onClose:onClose,children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (\\u0420\\u0443\\u0441\\u0441\\u043A\\u043E\\u0435):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name_ru\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (English):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name_en\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name_en&&\"Введите название\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (Spanish):\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"},register(\"name_es\",{required:true}))),/*#__PURE__*/_jsx(Form.Text,{className:styles.errors,children:errors.name_es&&\"Введите название\"})]}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"exampleForm.activeCategory\",className:\"mr-4\",children:/*#__PURE__*/_jsx(Form.Check,_objectSpread({type:\"checkbox\",label:\"\\u0412\\u044B\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u043E\"},register(\"disabled\")))}),/*#__PURE__*/_jsx(ImageCropper,{register:register,options:options}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:!isValid,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",onClick:onClose,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]})});};","map":null,"metadata":{},"sourceType":"module"}